name: WordPress Cache Prewarmer

on:
  # ExÃ©cution planifiÃ©e (cron)
  schedule:
    # Tous les jours Ã  3h du matin (UTC)
    - cron: '0 2 * * *'
    # Toutes les 6 heures
    # - cron: '0 */6 * * *'
  
  # Permet l'exÃ©cution manuelle depuis l'interface GitHub
  workflow_dispatch:

jobs:
  preload-cache:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout du repository
        uses: actions/checkout@v4
      
      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: ğŸ“¦ Installation des dÃ©pendances
        run: npm ci
      
      - name: ğŸš€ PrÃ©chargement du cache
        run: node preload.js
        env:
          # Variables d'environnement (optionnel)
          SITE_URL: ${{ secrets.SITE_URL }}
      
      - name: ğŸ“Š Upload des logs (en cas d'erreur)
        if: failure()
        uses: actions/upload-artifact@v4
        with:
          name: preload-logs
          path: |
            *.log
            *.txt
          retention-days: 7
```

## ğŸ“ Rappel : OÃ¹ crÃ©er ce fichier sur GitHub

Quand vous crÃ©ez ce fichier sur GitHub, le chemin complet doit Ãªtre :
```
.github/workflows/preload.yml
